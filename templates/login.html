<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Login - MathBot</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='auth.css') }}">
</head>
<body>

<div class="auth-container">
    <div class="auth-card">
        <h2>Welcome Back</h2>
        <p class="subtitle">Log in to your MathBot account</p>

        {% with messages = get_flashed_messages() %}
        {% if messages %}
            <div class="alert">{{ messages[0] }}</div>
        {% endif %}
        {% endwith %}

        <form method="POST">
            <input type="text" name="username" placeholder="Username" required>
            <input type="password" name="password" placeholder="Password" required>

            <!-- GOOGLE RECAPTCHA -->
            <div class="g-recaptcha"
                 data-sitekey="6Lc2b04sAAAAAIOiTG6XfF5zKTAngx69A81UKRw2">
            </div>

            <button type="submit">Log In</button>
        </form>

        <p class="switch">
            Don't have an account?
            <a href="/signup">Create one</a>
        </p>
    </div>
</div>

{% if success %}
<div class="success-overlay">
    <div class="success-card page-enter">
        <h2>âœ… {{ success_title }}</h2>
        <p>{{ success_message }}</p>
        <a href="{{ success_link }}">
            <button>{{ success_button }}</button>
        </a>
    </div>
</div>
{% endif %}

{% with messages = get_flashed_messages(with_categories=true) %}
{% for category, message in messages %}
{% if message == "login_success" %}
<div class="success-overlay">
    <div class="success-card page-enter">
        <h2>ðŸŽ‰ Welcome Back!</h2>
        <p>Login successful.</p>
        <a href="/dashboard">
            <button>Continue</button>
        </a>
    </div>
</div>
{% endif %}
{% endfor %}
{% endwith %}

<!-- CAPTCHA SCRIPT -->
<script src="https://www.google.com/recaptcha/api.js" async defer></script>

</body>
</html>
